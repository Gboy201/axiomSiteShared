<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact - Axiom Startups</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="form-page">
    <!-- Navigation Bar -->
    <nav id="navbar">
        <div class="nav-left">
            <a href="index.html" class="nav-title">Axiom</a>
        </div>
        <div class="nav-right">
            <a href="apply.html" class="nav-link">Apply</a>
            <a href="about.html" class="nav-link">About</a>
            <a href="sponsors.html" class="nav-link">Sponsors</a>
            <a href="schedule.html" class="nav-link">Schedule</a>
            <a href="team.html" class="nav-link">Team</a>
            <a href="contact.html" class="nav-link">Contact</a>
        </div>
        <div class="hamburger" id="hamburger">
            <div class="hamburger-line"></div>
            <div class="hamburger-line"></div>
            <div class="hamburger-line"></div>
        </div>
    </nav>

    <div id="page-container">
        <h1 class="page-title">Contact</h1>
        
        <div id="contact-content">
            <p class="contact-intro">If you're a sponsor, participant, or have any questions, don't hesitate to contact us!</p>
            
            <div id="form-container">
                <form id="contact-form" action="/api/submit-contact" method="POST">
                    
                    <div class="form-group">
                        <label for="name">Your Name <span class="required">*</span></label>
                        <input type="text" id="name" name="name" required>
                    </div>

                    <div class="form-group">
                        <label for="organization">Organization/Company (Optional)</label>
                        <input type="text" id="organization" name="organization">
                    </div>

                    <div class="form-group">
                        <label for="email">Email Address <span class="required">*</span></label>
                        <input type="email" id="email" name="email" required>
                    </div>

                    <div class="form-group">
                        <label for="message">Message <span class="required">*</span></label>
                        <textarea id="message" name="message" rows="6" required placeholder="Tell us how we can help you..."></textarea>
                    </div>

                    <div class="form-group">
                        <button type="submit" class="submit-btn">Send Message</button>
                    </div>

                    <div id="form-message" class="form-message" style="display: none;"></div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Dragon Sprite -->
    <div class="page-dragon"></div>
    
    <!-- Go Back Button -->
    <div class="go-back-container">
        <a href="#" class="go-back-btn" onclick="goBackToGame()">Go Back</a>
    </div>
    
    <!-- Hamburger Menu JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const hamburger = document.getElementById('hamburger');
            const navRight = document.querySelector('.nav-right');
            
            hamburger.addEventListener('click', function() {
                hamburger.classList.toggle('active');
                navRight.classList.toggle('active');
            });
            
            // Close menu when clicking on a nav link
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', function() {
                    hamburger.classList.remove('active');
                    navRight.classList.remove('active');
                });
            });
            
            // Close menu when clicking outside
            document.addEventListener('click', function(event) {
                if (!hamburger.contains(event.target) && !navRight.contains(event.target)) {
                    hamburger.classList.remove('active');
                    navRight.classList.remove('active');
                }
            });
        });

        function goBackToGame() {
            // Store the current page for portal positioning
            localStorage.setItem('returnFromPage', 'contact.html');
            // Always return to homepage, positioned near the portal they came from
            window.location.href = 'index.html';
        }
    </script>

    <!-- Contact Form JavaScript (Fallback for Python server) -->
    <script>
        document.getElementById('contact-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Show loading state
            const submitBtn = document.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Sending...';
            submitBtn.disabled = true;
            
            try {
                // Get form data
                const formData = new FormData(document.getElementById('contact-form'));
                const data = {
                    name: formData.get('name'),
                    organization: formData.get('organization') || '',
                    email: formData.get('email'),
                    message: formData.get('message')
                };
                
                // Submit to Node.js API
                const response = await fetch('/api/submit-contact', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                // Check if response is JSON before parsing
                const contentType = response.headers.get('content-type');
                let result;
                
                if (contentType && contentType.includes('application/json')) {
                    result = await response.json();
                } else {
                    // Handle non-JSON responses (error pages, etc.)
                    const textResponse = await response.text();
                    console.error('Non-JSON response received:', textResponse);
                    throw new Error(`Server returned ${response.status}: ${response.statusText}`);
                }
                
                if (response.ok && result.success) {
                    // Success
                    showMessage(result.message || 'Thank you for contacting us! We\'ll get back to you soon.', 'success');
                    document.getElementById('contact-form').reset();
                } else {
                    // Handle errors
                    if (result.errors && Array.isArray(result.errors)) {
                        showMessage('Please fix these errors:\n\n' + result.errors.join('\n'), 'error');
                    } else {
                        showMessage(result.error || 'An error occurred. Please try again.', 'error');
                    }
                }
            } catch (error) {
                console.error('Contact form submission error:', error);
                showMessage('Network error. Please check your connection and try again.', 'error');
            } finally {
                // Reset button state
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            }
        });

        function showMessage(message, type) {
            const messageDiv = document.getElementById('form-message');
            messageDiv.textContent = message;
            messageDiv.className = `form-message ${type}`;
            messageDiv.style.display = 'block';
            
            // Hide message after 5 seconds
            setTimeout(() => {
                messageDiv.style.display = 'none';
            }, 5000);
        }
    </script>
</body>
</html> 